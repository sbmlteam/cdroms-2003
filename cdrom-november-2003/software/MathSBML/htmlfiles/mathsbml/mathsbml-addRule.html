<html>
<head>
<LINK REL="STYLESHEET" HREF="../../site.css" TYPE="text/css" />
<LINK REL="STYLESHEET" HREF="../../mathsbml.css" TYPE="text/css"/>
<title>MathSBML</title>
</head>
<body >

<div align="center">
<h1 style="color: #003399;">MathSBML</h1>
<table border="0" cellspacing="6" cellpadding="2">
  <tr>
  <td class="button"><a href="../../mathsbml.html">MathSBML Home Page</a></td>
  <td class="button"><a href="mathsbml-sitemap.html">MathSBML Site Map</a></td>
  </tr>
</table>
</div>


<h1>MathSBML Model Builder:<span class="function"> add/remove/modifyRule</span> </h1>

<hr/>

			
<p><span class="function">addRule[options]</span> adds a rule to the current model. Options are the same
as <a class="function" href="mathsbml-ruleToSBML.html">ruleToSBML</a>. In addition, if the <span class="function">id</span> option is not
specified, a <span class="function">metaid</span> is automatically assigned to the rule; otherwise, the value of the <span class="function">id
</span> field is used for the <span class="function">metaid</span>.  The following restrictions are enforced by <span class="function">
addRule</span>:
<ul>
	<li>Rules may not refer to the same variable on both sides of the equation.</li>
	<li>Rules may not refer to variables on the right side of the equation that are subsequently assigned a rule of their own.</li>
</ul>

</p>

<p><span class="function">modifyRule[id, options]</span> modifies a rule in the current model. The 
argument <span class="function">id</span> refers to the <span class="function">metaid</span> field of the rule. (Note that both 
<span class="function">addRule</span> and <span class="function">SBMLRead</span> automatically assign a <span class="function">metaid</span>
to a rule if it is not already specified, so every rule in the model builder is guaranteed to already have a <span class="function">metaid</span> already
assigned to it.) When a rule is modified its order relative to other rules in the model is retained, e.g., if a rule is the 7th of 13 rules before
invoking <span class="function">modifyRule</span> it will still be the 7th of 13 rules afterwards. </p>

<p><span class="function">removeRule[metaid]</span> removes the specified rule from the current model.</p>
<span style="font-size:xx-small;">addRule, removeRule, modifyRule new in 2.2.0 </span>
<hr/>
<h1>Example</h1>

<pre class="blackfunction">

<span class="redfunction">input:  </span>newModel["ruler", name ->  "example with rules"]; 
        addSpecies[x, compartment -> "c1"];
        addSpecies[y, compartment -> "c1"]; 
        addSpecies[z, compartment -> "c1"]; 
<span class="redfunction">output: </span><span class="greenfunction">Compartment <span class="bluefunction">c1</span> added.
        Species <span class="bluefunction">x</span> added to compartment <span class="bluefunction">c1</span>
        Species <span class="bluefunction">y</span> added to compartment <span class="bluefunction">c1</span>
        species <span class="bluefunction">z</span> added to compartment <span class="bluefunction">c1</span></span>

<span class="redfunction">input:  </span>addRule[type -> assignmentRule, variable -> x, math -> z^2 + Sqrt[z]];
<span class="redfunction">output: </span><span class="greenfunction">Rule <span class="bluefunction">rule1</span> added.</span>

<span class="redfunction">input:  </span>addRule[type -> "rateRule", variable -> y, math -> x*y];
<span class="redfunction">output: </span><span class="redfunction">Error: rule2</span> refers to <span class="redfunction">y</span> on both sides of the equation and is not permitted.

<span class="redfunction">input:  </span>addRule[type -> "rateRule", variable -> y, math -> x*z];
<span class="redfunction">output: </span><span class="redfunction">Error: </span> A rule with <span class="redfunction">z</span> on its right 
        hand side has been previously defined and therefore this rule can not be added.

<span class="redfunction">input:  </span>addRule[type -> "rateRule", variable -> y, math -> x*z]
<span class="redfunction">output: </span><span class="greenfunction">Rule <span class="bluefunction">rule4</span> added.</span>

<span class="redfunction">input:  </span>addRule[type -> "algebraicRule", math -> x + y + z]
<span class="redfunction">output: </span><span class="greenfunction">Rule <span class="bluefunction">rule5</span> added.</span>

<span class="redfunction">input:  </span>createModel[]
<span class="redfunction">output: </span>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
        &lt;!-- Generated 30-September-2003 13:42:00.160781 --&gt;
        &lt;!-- Generated by MathSBML 2.1.5b15 (30 Sept 2003) --&gt;
        &lt;sbml xmlns="http://www.sbml.org/sbml/level2"
            level="2"
            version="1"&gt;
         &lt;model id="ruler"
             name="example with rules"&gt;
          &lt;listOfFunctionDefinitions/&gt;
          &lt;listOfUnitDefinitions/&gt;
          &lt;listOfCompartments&gt;
           &lt;compartment id="c1"
               name="c1"/&gt;
          &lt;/listOfCompartments&gt;
          &lt;listOfSpecies&gt;
           &lt;species id="x"
               name="x"
               compartment="c1"
               boundaryCondition="false"
               constant="false"/&gt;
           &lt;species id="y"
               name="y"
               compartment="c1"
               boundaryCondition="false"
               constant="false"/&gt;
           &lt;species id="z"
               name="z"
               compartment="c1"
               boundaryCondition="false"
               constant="false"/&gt;
          &lt;/listOfSpecies&gt;
          &lt;listOfParameters/&gt;
          &lt;listOfRules&gt;
           &lt;assignmentRule variable="x"
               metaid="rule1"&gt;
            &lt;math xmlns="http://www.w3.org/1998/Math/MathML"&gt;
             &lt;apply&gt;
              &lt;plus/&gt;
              &lt;apply&gt;
               &lt;power/&gt;
               &lt;ci&gt;z&lt;/ci&gt;
               &lt;cn type="integer"&gt;2&lt;/cn&gt;
              &lt;/apply&gt;
              &lt;apply&gt;
               &lt;power/&gt;
               &lt;ci&gt;z&lt;/ci&gt;
               &lt;cn type="rational"&gt;1&lt;sep/&gt;2&lt;/cn&gt;
              &lt;/apply&gt;
             &lt;/apply&gt;
            &lt;/math&gt;
           &lt;/assignmentRule&gt;
           &lt;rateRule variable="y"
               metaid="rule4"&gt;
            &lt;math xmlns="http://www.w3.org/1998/Math/MathML"&gt;
             &lt;apply&gt;
              &lt;times/&gt;
              &lt;ci&gt;x&lt;/ci&gt;
              &lt;ci&gt;z&lt;/ci&gt;
             &lt;/apply&gt;
            &lt;/math&gt;
           &lt;/rateRule&gt;
           &lt;algebraicRule metaid="rule5"&gt;
            &lt;math xmlns="http://www.w3.org/1998/Math/MathML"&gt;
             &lt;apply&gt;
              &lt;plus/&gt;
              &lt;ci&gt;x&lt;/ci&gt;
              &lt;ci&gt;y&lt;/ci&gt;
              &lt;ci&gt;z&lt;/ci&gt;
             &lt;/apply&gt;
            &lt;/math&gt;
           &lt;/algebraicRule&gt;
          &lt;/listOfRules&gt;
          &lt;listOfReactions/&gt;
          &lt;listOfEvents/&gt;
         &lt;/model&gt;
        &lt;/sbml&gt;


<span class="redfunction">input:  </span>modifyRule[rule5, math -> Sqrt[x^2 + y^2 + z^2]]
<span class="redfunction">output: </span><span class="greenfunction">Rule <span class="bluefunction">rule5</span> modified.</span>
<span class="redfunction">input:  </span>createModel[]
<span class="redfunction">output: </span>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
        &lt;!-- Generated 30-September-2003 13:46:34.924475 --&gt;
        &lt;!-- Generated by MathSBML 2.1.5b15 (30 Sept 2003) --&gt;
        &lt;sbml xmlns="http://www.sbml.org/sbml/level2"
            level="2"
            version="1"&gt;
         &lt;model id="ruler"
             name="example with rules"&gt;
          &lt;listOfFunctionDefinitions/&gt;
          &lt;listOfUnitDefinitions/&gt;
          &lt;listOfCompartments&gt;
           &lt;compartment id="c1"
               name="c1"/&gt;
          &lt;/listOfCompartments&gt;
          &lt;listOfSpecies&gt;
           &lt;species id="x"
               name="x"
               compartment="c1"
               boundaryCondition="false"
               constant="false"/&gt;
           &lt;species id="y"
               name="y"
               compartment="c1"
               boundaryCondition="false"
               constant="false"/&gt;
           &lt;species id="z"
               name="z"
               compartment="c1"
               boundaryCondition="false"
               constant="false"/&gt;
          &lt;/listOfSpecies&gt;
          &lt;listOfParameters/&gt;
          &lt;listOfRules&gt;
           &lt;assignmentRule variable="x"
               metaid="rule1"&gt;
            &lt;math xmlns="http://www.w3.org/1998/Math/MathML"&gt;
             &lt;apply&gt;
              &lt;plus/&gt;
              &lt;apply&gt;
               &lt;power/&gt;
               &lt;ci&gt;z&lt;/ci&gt;
               &lt;cn type="integer"&gt;2&lt;/cn&gt;
              &lt;/apply&gt;
              &lt;apply&gt;
               &lt;power/&gt;
               &lt;ci&gt;z&lt;/ci&gt;
               &lt;cn type="rational"&gt;1&lt;sep/&gt;2&lt;/cn&gt;
              &lt;/apply&gt;
             &lt;/apply&gt;
            &lt;/math&gt;
           &lt;/assignmentRule&gt;
           &lt;rateRule variable="y"
               metaid="rule4"&gt;
            &lt;math xmlns="http://www.w3.org/1998/Math/MathML"&gt;
             &lt;apply&gt;
              &lt;times/&gt;
              &lt;ci&gt;x&lt;/ci&gt;
              &lt;ci&gt;z&lt;/ci&gt;
             &lt;/apply&gt;
            &lt;/math&gt;
           &lt;/rateRule&gt;
           &lt;algebraicRule metaid="rule5"&gt;
            &lt;math xmlns="http://www.w3.org/1998/Math/MathML"&gt;
             &lt;apply&gt;
              &lt;power/&gt;
              &lt;apply&gt;
               &lt;plus/&gt;
               &lt;apply&gt;
                &lt;power/&gt;
                &lt;ci&gt;x&lt;/ci&gt;
                &lt;cn type="integer"&gt;2&lt;/cn&gt;
               &lt;/apply&gt;
               &lt;apply&gt;
                &lt;power/&gt;
                &lt;ci&gt;y&lt;/ci&gt;
                &lt;cn type="integer"&gt;2&lt;/cn&gt;
               &lt;/apply&gt;
               &lt;apply&gt;
                &lt;power/&gt;
                &lt;ci&gt;z&lt;/ci&gt;
                &lt;cn type="integer"&gt;2&lt;/cn&gt;
               &lt;/apply&gt;
              &lt;/apply&gt;
              &lt;cn type="rational"&gt;1&lt;sep/&gt;2&lt;/cn&gt;
             &lt;/apply&gt;
            &lt;/math&gt;
           &lt;/algebraicRule&gt;
          &lt;/listOfRules&gt;
          &lt;listOfReactions/&gt;
          &lt;listOfEvents/&gt;
         &lt;/model&gt;
        &lt;/sbml&gt;


</pre>

</body>
</html>

